\documentclass[a4paper,10pt,ngerman]{scrartcl}
\usepackage{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{textcomp}
\usepackage[a4paper,margin=2.5cm,footskip=0.5cm]{geometry}

% Die nächsten drei Felder bitte anpassen:
\newcommand{\Aufgabe}{Aufgabe 2: Spießgesellen} % Aufgabennummer und Aufgabennamen angeben
\newcommand{\TeilnahmeId}{55628}       % Teilnahme-Id angeben
\newcommand{\Namen}{Michal Boron} % Namen der Bearbeiter/-innen dieser Aufgabe angeben
 
% Kopf- und Fußzeilen
\usepackage{scrlayer-scrpage, lastpage}
\setkomafont{pageheadfoot}{\large\textrm}
\lohead{\Aufgabe}
\rohead{Teilnahme-Id: \TeilnahmeId}
\cfoot*{\thepage{}/\pageref{LastPage}}

% Position des Titels
\usepackage{titling}
\setlength{\droptitle}{-1.0cm}
\usepackage{seqsplit}
\usepackage{verbatim}

% Für mathematische Befehle und Symbole
\usepackage{amsmath}
\usepackage{amssymb}
%\usepackage{cite}

\usepackage[backend=bibtex]{biblatex}
\addbibresource{stromrallye.bib}

\usepackage{hyperref}
\hypersetup{
    colorlinks=false,
    linkcolor=blue,
    filecolor=magenta,      
    urlcolor=cyan,
}
% Für Bilder
\usepackage{graphicx}
\usepackage[all]{xy}
\usepackage{svg}
\graphicspath{ {./images/} }

% Für Algorithmen
\usepackage{algpseudocode}
\usepackage{algorithm}
\usepackage{gensymb}
\usepackage{tikz}
\usepackage{caption}
\usepackage{subcaption}
\usepackage{array}
\usepackage{makecell}

\usepackage[backgroundcolor=lightgray]{todonotes}
\usepackage{minibox}

\usepackage{amsthm}
\usepackage{enumitem}

\usepackage[backend=bibtex]{biblatex}
\addbibresource{spiess.bib}

% Für Quelltext
\usepackage{listings}
\usepackage{color, colortbl}
\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}
\definecolor{lightblue}{HTML}{cce6ff}
\definecolor{lightred}{HTML}{ffb3b3}

\lstset{
  keywordstyle=\color{blue},commentstyle=\color{mygreen},
  stringstyle=\color{mymauve},rulecolor=\color{black},
  basicstyle=\footnotesize\ttfamily,numberstyle=\tiny\color{mygray},
  captionpos=b, % sets the caption-position to bottom
  keepspaces=true, % keeps spaces in text
  numbers=left, numbersep=5pt, showspaces=false,showstringspaces=true,
  showtabs=false, stepnumber=2, tabsize=2, title=\lstname
}

% Diese beiden Pakete müssen zuletzt geladen werden
%\usepackage{hyperref} % Anklickbare Links im Dokument
\usepackage{cleveref}
%\newtheorem{lemma}{Lemma}
%\newenvironment{proof}{\paragraph{Beweis:}}{\hfill$\square$}
\newtheorem{lemma}{Lemma}
\newtheorem{definition}{Definition}
\newtheorem{satz}{Satz}
\newtheorem{axiom}{Axiom}
\newtheorem{korollar}{Korollar}
%\renewcommand*{\proofname}{Solution}

\newcommand{\TODO}[1]{\todo[inline]{TODO: #1}}
\newcommand{\mb}[1]{{\color{red}[MB: #1]}}
\newcommand{\tbf}[1]{\textbf{#1}}
\newcommand{\ttt}[1]{\texttt{#1}}

\usetikzlibrary{fit,backgrounds,positioning}
\tikzset{vertex/.style={circle,draw,minimum size=0.8cm,inner sep=1pt,fill=white}}

% Daten für die Titelseite
\title{\textbf{\Huge\Aufgabe}}
\author{\LARGE Teilnahme-Id: \LARGE \TeilnahmeId \\\\
	    \LARGE Bearbeiter dieser Aufgabe: \\ 
	    \LARGE \Namen\\\\}
\date{\LARGE April 2021}

\begin{document}

\maketitle
\tableofcontents

\section{Lösungsidee}
\input{./tex/formulierung.tex}

\input{./tex/bipartiter-graph.tex}

\input{./tex/logik.tex}

\input{./tex/komponenten.tex}

\subsection{Prüfung auf Korrektheit der Eingabe}\label{sec:korrektheit-eingabe}
Am Ende des Teils \ref{sec:formulierung} wurde bemerkt, dass die Korrektheit und Vollstädigkeit
der Lösung davon abhängt, ob alle Obstsorten in einer Eingabe Axiom \ref{ax:obstsorte-index} folgen.

\TODO{zrobić}

\subsection{Laufzeit}\label{sec:laufzeit}
$n$ --- die Anzahl der Obstsorten\\
$m$ --- die Anzahl der Spießkombinationen\\
$w$ --- die Anzahl der Wünsche (also $|W|$), im worst-case $w = n$

\begin{itemize}
  \item Einlesen: $O(m \cdot n \log n)$ (worst-case) \mb{sprawdzić bitsety}
  \TODO{dodać złożoności dla $w$}
  \begin{itemize}
    \item Erstellung der Adjazenzmatrix $M$: \mb{$O(\frac{n}{w?})$; dodać info o bitsetach}
    \item Einlesen der Menge $W$: $O(w \log w)$\\
     Implementierug von \ttt{set} in C++ als Rot-schwarz-Bäume\footnote{\href{https://en.cppreference.com/w/cpp/container/set}{https://en.cppreference.com/w/cpp/container/set}}
    \item Einlesen der Spießkombinationen: $O(m \cdot n \log n)$ (worst-case)\\
    Im schlimmsten Fall enthält jede Spießkombination alle Obstsorten.
    Die logarithmische Laufzeit ist durch Einfügen in eine Menge verursacht.
    \item Zuweisung der internen Indizes der Obstsorten (s. \nameref{sec:umsetzung}): $O(n \log n)$\\
     Implementierug von \ttt{map} in C++ als Rot-schwarz-Bäume\footnote{\href{https://en.cppreference.com/w/cpp/container/map}{https://en.cppreference.com/w/cpp/container/map}}    
    \item Umwandlung der gewünschten Obstsorten von Strings zu Integers: $O(w \log n)$\\
    Das Suchen in einer \ttt{map} hat logarithmische Laufzeit bezüglich der Anzahl
    der Obstsorten: $O(\log n)$.
    Das Einfügen in eine \ttt{set} hat logarithmische Laufzeit bezüglich der Anzahl
    der Wünsche: $O(\log w)$. Wir schätzen nach oben ab und im worst-case gilt: $w = n$,
    deshalb gilt für die gesamte Laufzeit: $O(w (\log n + \log w)) \in O(w (\log n + \log n)) \in 
    O(w \log n)$. \mb{czy to tak może być?}
    \item Umwandlung der Obstsorten in allen Spießkombinationen von Strings zu Integers:
    $O(m \cdot n \log n)$\\
    In jeder Spießkombination können sich im worst-case alle $n$ Obstsorten befinden.
    Das Suchen in einer \ttt{map} hat logarithmische Laufzeit bezüglich der Anzahl
    der Obstsorten: $O(\log n)$.
    Das Einfügen in eine \ttt{set} hat ebenfalls logarithmische Laufzeit bezüglich der Anzahl
    der Obstsorten: $O(\log n)$. 
    Deshalb beträgt die Laufzeit für alle Obstsorten in einer Spießkombination höchstens: $O(n \log n)$.   
  \end{itemize}
  \item Verarbeitung der Spießkombinationen
    \TODO{dodać coś o bitsetach}
  \begin{itemize}
    \item Verarbeitung einer Spießkombination:\\
    Man geht davon aus, dass eine Spießkombination im worst-case alle Obstsorten enthält.
    \begin{itemize}
      \item Erstellung der Bitmaske $bf$: $O(n)$ (worst-case)
      \item Erstellung der Bitmaske $bn$: $O(w)$ (worst-case)
    \end{itemize}


    \item Kopieren der Adjazenzmatrix in \ttt{Graph G} (s. \nameref{sec:umsetzung}): 
  \end{itemize}
  \item Prüfung der Korrektheit der Eingabe
  \item Prüfung der Existenz einer Lösung
\end{itemize}

\subsection{Speicherplatz}\label{sec:Speicherplatz}


\printbibliography

\newpage
\section{Umsetzung}\label{sec:umsetzung}
\input{./tex/ums_solver.tex}

\input{./tex/ums_graph.tex}

\newpage
\section{Beispiele}
\TODO{dodać dodatkowe przykłady}
\input{./tex/beispiele.tex}

\section{Quellcode}
\lstinputlisting[language=C++]{./tex/spiesse.m}

\end{document}